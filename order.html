<!DOCTYPE html> <!--Defines document type and html version-->
<html lang="en"> <!--Contains the entire html document-->
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--scales your website-->
    <meta name="description" content="Record and apply to jobs. All in one place">
    <meta name="keywords" content="job, career, interface, apply">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JobMap | Ordering</title><!--Usually contains the header i.e. the name that shows up on the top of the tab-->
    <link rel="stylesheet" href="./css/format.css"><!--for css files-->
</head><!--Keeps other html tags-->
<body>
    <header>
        <!--id is for something that is unique ex: showcase area vs class used everywhere-->
        <div class="container">  <!--useful for adding padding to a header-->
            <div id = "branding">
                <h1>JobMap</h1>
            </div>
            <!--helps us navigate the website-->
            <nav>
                <ul>
                    <li><a href= "index.html">Homepage</a></li>
                    <li><a href= "faqs.html">FAQs</a></li>
                    <li><a href= "updates.html">What's New?</a></li>
                    <li><a href= "about.html">About Us</a></li>
                    <li><a href= "service.html">Customer Service</a></li>
                    <li><a href= "product_information.html">Product Information</a></li>
                    <li><a href= "catalogue.html">Catalogue</a></li>
                    <li><a href= "employment.html">Employment</a></li>
                    <li class="current"><a href= "order.html">Order</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <h1>Please fill out your information</h1>
    <form  id = "myForm" style = "text-align:center">
        First Name: <input id = "first" type="text"  name="first"><br>
        Last Name: <input id = "last" type="text"  name="last"><br>
        Street Address: <input id = "address"  type="text"  name="address"><br>
        City:<input id = "city" type="text"  name="city"><br>
        State: <input id = "state" type="text"  name="state"><br>
        Zip:  <input id = "zip" type="text"  name="zip"><br>
        Telephone number: <input id = "number" type="text"  name="phone"><br>
        EMail: <input id = "email" type="text"  name="email"><br>
        Credit card number (max length is 16): <input id = "cnumber" type="text"  name="ccnum"><br>
        Card type: <select name = "cctype">
                <option value="Visa">Visa</option>
                <option value="Mastercard">Mastercard</option>
                <option value="Ax">Ax</option>
        </select>
        <br>
        Credit card expiration date (format is mm/yyyy): <input id = "date" type="text"  name="ccexpire"><br>
        Comment: <br><textarea name="comment" id ="comment" style="width:250px;height:150px;"></textarea>
        <br>
        Form name:<input type="hidden" name="edwardc6@uci.edu" value="Test">
        <table style="width:100%; text-align: center">
            <tr>
                <th>Category</th>
                <th>Description</th> 
                <th>Unit Price</th>
                <th>Quantity</th>
                <th>Total Price</th>
            </tr>
            <tr>
                <td>1</td>
                <td>Premium</td> 
                <td>$10</td>
                <td><input id = "quantity1" onchange="changeInput1(10)"></input></td>
                <td><input id = "premium"></input></td>
            </tr>
            <tr>
                <td></td>
                <td>Unique</td> 
                <td>$30</td>
                <td><input id = "quantity2" onchange=changeInput2(30)></input></td>
                <td><input id = "unique"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Subtotal $</td>
                <td><input id = "subtotal1"></input></td>
            </tr>
            <tr>
                <td>2</td>
                <td>Team</td> 
                <td>$10</td>
                <td><input id = "quantity3" onchange=changeInput3(10)></input></td>
                <td><input id = "team"></input></td>
            </tr>
            <tr>
                <td></td>
                <td>Individual</td> 
                <td>$20</td>
                <td><input id = "quantity4" onchange=changeInput4(20)></input></td>
                <td><input id = "individual"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Subtotal $</td>
                <td><input id = "subtotal2"></input></td>
            </tr>
            <!-- <tr>
                <td>3</td>
                <td>Lifetime</td> 
                <td>$60</td>
                <td><input id = "quantity5" onchange=changeInput5(60)></input></td>
                <td><input id = "lifetime"></input></td>
            </tr>
            <tr>
                <td></td>
                <td>Monthly</td> 
                <td>$90</td>
                <td><input id = "quantity6" onchange=changeInput6(90)></input></td>
                <td><input id = "monthly"></input></td>
            </tr>
            
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Subtotal $</td>
                <td><input id = "subtotal3"></input></td>
            </tr> -->
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Total $</td>
                <td><input id = "total1"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Sales Tax(8.25%)$</td>
                <td><input id = "tax"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Total $</td>
                <td><input id = "total2"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Shipping and Handling $</td>
                <td><input id = "shipping"></input></td>
            </tr>
            <tr>
                <td></td>
                <td></td> 
                <td></td>
                <td>Grand Total $</td>
                <td><input id = "total3"></input></td>
            </tr>   
            </table>
        <INPUT TYPE=button value=Submit onClick="submitForm()">
        <INPUT TYPE=button value=Reset onClick="resetForm()">
    </form>
    <script>
    function testDate(testing){
        regex = /^(0[1-9]|1[012])\/\d{4}$/
        if(regex.test(testing)){
            var x = testing.split('/')
            var month = x[0]
            var year = x[1]
            var day = 1
            var expDate = new Date(year,month,day)
            var curr = new Date()
            return expDate.getTime() > curr.getTime()   
        }
        return false
    }
    function validateForm(value, count){
        var regex = /.*[^ ].*/;
        if(count == 5){
            regex = /(^\d{5}$|^\d{9}$)/
        }
        else if(count == 6){
            regex = /^\(\d{3}\)\s\d{3}-\d{4}$/
        }
        else if(count == 8){
            regex = /^\d{16}$/
        }
        else if(count == 10){
            return testDate(value)
        }
        return regex.test(value)
    }
    function calculateTotal(){
        var subtotal1 = parseInt(document.getElementById("subtotal1").value)
        var subtotal2 = parseInt(document.getElementById("subtotal2").value)
        if(subtotal2 && subtotal1)
            document.getElementById("total1").value =  subtotal1 +subtotal2
        else if(subtotal1)
            document.getElementById("total1").value = subtotal1 
        else if(subtotal2)
            document.getElementById("total1").value = subtotal2
        else{
            document.getElementById("tax").value = ""
            document.getElementById("total1").value ="" 
            document.getElementById("total2").value =""
            document.getElementById("shipping").value = ""
            document.getElementById("total3").value = ""
        }

        var total = parseInt(document.getElementById("total1").value)
        if(total){
            var tax = (total*0.0825).toPrecision(2)
            document.getElementById("tax").value = tax
            document.getElementById("total2").value =  total +parseFloat(tax)
            var shipping = 8.00
            document.getElementById("shipping").value = shipping
            document.getElementById("total3").value = parseFloat(document.getElementById("total2").value) + shipping
        }
        
    }
    function changeInput1(value){
        var computed = parseInt(document.getElementById("quantity1").value)*value
        
        var quantity = document.getElementById("quantity1").value
        if(Number.isInteger(parseInt(quantity)) && parseInt(quantity) > 0){
            if(parseInt(document.getElementById("unique").value))
                document.getElementById("subtotal1").value = parseInt(computed)+ parseInt(document.getElementById("unique").value)
            else 
                document.getElementById("subtotal1").value = parseInt(computed)
            
        }
        else{
            var minus = parseInt(document.getElementById("premium").value)
            if(minus)
                document.getElementById("subtotal1").value -= minus 

        }
        document.getElementById("premium").value = computed
        calculateTotal() 
        
    }
    function changeInput2(value){
        var computed = parseInt(document.getElementById("quantity2").value)*value
        
        var quantity = document.getElementById("quantity2").value
        if(Number.isInteger(parseInt(quantity)) && parseInt(quantity) > 0){
            if(parseInt(document.getElementById("premium").value))
                document.getElementById("subtotal1").value = parseInt(computed) + parseInt(document.getElementById("premium").value)
            else 
                document.getElementById("subtotal1").value = parseInt(computed)
        }
        else{
            var minus = parseInt(document.getElementById("unique").value)
            if(minus)
                document.getElementById("subtotal1").value -= minus 
            
        }
        document.getElementById("unique").value = computed 
        calculateTotal()
        
        
    }
    function changeInput3(value){
        var computed = parseInt(document.getElementById("quantity3").value)*value
        
        var quantity = document.getElementById("quantity3").value
        if(Number.isInteger(parseInt(quantity)) && parseInt(quantity) > 0){
            if(parseInt(document.getElementById("individual").value))
                document.getElementById("subtotal2").value = parseInt(computed) + parseInt(document.getElementById("individual").value)
            else 
                document.getElementById("subtotal2").value = parseInt(computed)
        }
        else{
            var minus = parseInt(document.getElementById("team").value)
            if(minus)
                document.getElementById("subtotal2").value -= minus 
        }
        document.getElementById("team").value = computed 
        calculateTotal()
        
    }
    function changeInput4(value){
        var computed = parseInt(document.getElementById("quantity4").value)*value
        
        var quantity = document.getElementById("quantity4").value
        if(Number.isInteger(parseInt(quantity)) && parseInt(quantity) > 0){
            if(parseInt(document.getElementById("team").value))
                document.getElementById("subtotal2").value = parseInt(computed) + parseInt(document.getElementById("team").value)
            else 
                document.getElementById("subtotal2").value = parseInt(computed)
        }
        else{
            var minus = parseInt(document.getElementById("individual").value)
            if(minus)
                document.getElementById("subtotal2").value -= minus 
        }
        document.getElementById("individual").value = computed 
        calculateTotal()
    }
    // function changeInput5(value){
    //     var computed = parseInt(document.getElementById("quantity5").value)*value
    //     document.getElementById("lifetime").value = computed 
        
    // }
    // function changeInput6(value){
    //     var computed = parseInt(document.getElementById("quantity6").value)*value
    //     document.getElementById("monthly").value = computed 
        
    // }
    function resetForm(){
        document.getElementById("myForm").reset();
    }
    function submitForm(){
        var length = 11 //document.forms[0].elements.length 
        for(i=0; i< length; i++){
            console.log(document.forms[0].elements[i].value)
            var computed = document.forms[0].elements[i].value
            var value = computed 
            
            if(!validateForm(value, i)){
                alert("Please refill out the field with name " + document.forms[0].elements[i].name)
                document.forms[0].elements[i].focus()
                document.forms[0].elements[i].select()
                return
            }
        }        
        document.forms[0].submit();
    }    
    </script>   
    <footer>
        <p>JobMap, Copyright &copy; 2018</p>
    </footer>
</body>
</html>